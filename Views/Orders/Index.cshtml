@model IEnumerable<LabASPNET.Models.Order>

@{
	ViewData["Title"] = "Список заказов";
}

<h2>Список заказов</h2>

<p>
	<a asp-action="Create" class="btn btn-primary">Создать новый заказ</a>
</p>

<form method="post" asp-action="EditTable" asp-controller="Orders">
	<table class="table">
		<thead>
		<tr>
			<th>ID заказа</th>
			<th>ID пользователя</th>
			<th>ID продукта</th>
			<th>Количество</th>
			<th>Дата заказа</th>
			<th>Действия</th>
		</tr>
		</thead>
		<tbody>
		@foreach (var order in Model)
		{
			<tr>
				<td>
					@order.OrderId
					<input type="hidden" name="orders[@order.OrderId].OrderId" value="@order.OrderId" />
				</td>
				<td><input type="number" name="orders[@order.OrderId].UserId" value="@order.UserId" class="form-control" /></td>
				<td><input type="number" name="orders[@order.OrderId].ProductId" value="@order.ProductId" class="form-control" /></td>
				<td><input type="number" name="orders[@order.OrderId].Quantity" value="@order.Quantity" class="form-control" /></td>
				<td><input type="date" name="orders[@order.OrderId].OrderDate" value="@order.OrderDate.ToString("yyyy-MM-dd")" class="form-control" /></td>
				<td>
					<form method="post" asp-action="DeleteOrder" asp-route-id="@order.OrderId">
						<button type="submit" class="btn btn-danger btn-sm">Удалить</button>
					</form>
				</td>
			</tr>
		}
		</tbody>
		<tfoot>
		<tr>
			<td colspan="6">
				<button type="submit" class="btn btn-success btn-sm float-right">Сохранить изменения</button>
			</td>
		</tr>
		</tfoot>
	</table>
</form>